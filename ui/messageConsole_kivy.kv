<MainWindow_kivy>:
    action_bar: action_bar
    message_label: message_label
    entry: entry
    scroll: scroll
    spinner_label: spinner_label

    BoxLayout:
        orientation: "vertical"

        ActionBar:
            id:action_bar
            background_color: "red"

        # 上部: メッセージ表示
        ScrollView:
            id: scroll
            do_scroll_x: False
            do_scroll_y: True

            Label:
                id: message_label
                text: ""
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width, None
                markup: True

        # 下部: 入力欄／スピナーを切り替え表示
        RelativeLayout:
            size_hint_y: None
            height: "40dp"

            # 入力欄
            TextInput:
                id: entry
                multiline: True
                size_hint: (1, 1)

            # スピナーラベル（同じ場所に重ねる）
            Label:
                id: spinner_label
                text: ""
                size_hint: (1, 1)
                opacity: 0   # 初期は非表示
                halign: "left"
                valign: "middle"


            # 送信ボタン
            Button:
                id: enterButton
                text: "▶"
                size_hint: (None, None)
                size: "40dp", "40dp"
                pos_hint: {"right": 1, "y": 0}
                on_press: root.on_clicled_enterButton()
                background_color: "red"
